# 104 人力銀行資料工程師職缺爬蟲程式教學說明

## 簡介
這個 Python 腳本是用來爬取 104 人力銀行上的資料工程師職缺清單。它會自動開啟瀏覽器、滾動頁面、抓取職缺資訊（如職稱、公司、薪資、地區等），並解析薪資，最後存成 CSV 檔案。這適合初學者練習 Python、網路爬蟲（使用 Selenium）和資料處理（使用 Pandas）。

**注意事項**：
- 網路爬蟲可能違反網站的使用條款，請確保只用於學習或個人分析，不要商業使用或大量爬取。
- 104 網站有反爬蟲機制（如 Cloudflare），程式已加入等待和隨機延遲來避開，但仍可能被封鎖。
- 程式碼已加註解，適合無程式基礎的初學者閱讀。

## 環境安裝
在執行前，需要安裝 Python 和相關套件。假設您使用 Windows 或 Mac。

1. **安裝 Python**：
   - 下載 Python 3.12 或以上版本，從官網 https://www.python.org/。
   - 安裝時勾選 "Add Python to PATH"。

2. **安裝套件**：
   - 開啟命令提示字元（Windows: cmd；Mac: Terminal）。
   - 輸入以下命令：pip install pandas selenium undetected-chromedriver psutil beautifulsoup4
- `pandas`：處理資料表格。
- `selenium` 和 `undetected-chromedriver`：模擬瀏覽器爬取動態網頁。
- `psutil`：管理系統進程。
- `beautifulsoup4`：輔助解析 HTML（雖然主要用 Selenium）。

3. **安裝 Chrome 瀏覽器**：
- 如果沒有，下載最新版 Chrome（https://www.google.com/chrome/）。
- `undetected-chromedriver` 會自動下載匹配的驅動程式。

## 如何執行程式
1. **存檔**：
- 將程式碼存成 `crawler_104_job_list.py`。

2. **執行**：
- 在命令提示字元中，進入檔案目錄（例如 cd 資料夾路徑）。
- 基本執行：`python crawler_104_job_list.py`（預設爬第 1 頁）。
- 進階執行，使用參數：
- 爬第 1 到 5 頁：`python crawler_104_job_list.py --start_page 1 --end_page 5`
- 無頭模式（不開視窗）：`python crawler_104_job_list.py --headless`
- 自訂輸出檔：`python crawler_104_job_list.py --output_csv my_jobs.csv`

3. **執行過程**：
- 程式會開啟 Chrome 瀏覽器，前往 104 網站。
- 如果遇到 Cloudflare 驗證，請在瀏覽器手動完成（例如點擊 "I'm human"），然後在命令提示字元按 Enter 繼續。
- 每頁會滾動載入，抓取約 20 個職缺。
- 資料會存成 CSV 檔案，例如 `job_data_jobcat_1022_20251019_pages_1_to_5.csv`（包含日期和頁碼）。

## 程式結構解釋
- **import 部分**：引入需要的套件。
- **parse_arguments()**：處理命令列輸入，讓程式可客製化。
- **cleanup_chrome_processes()**：清理殘留進程，避免程式卡住。
- **parse_salary()**：用正則表達式解析薪資文字，計算 min/max/avg。
- **download_page()**：核心爬取函式，使用 Selenium 抓取一頁資料，處理等待和錯誤。
- **save_data()**：合併資料、去重、存成 CSV。
- **main()**：程式入口，初始化瀏覽器、迴圈爬頁、最後清理。

## 輸出 CSV 欄位說明
- `job_title`：職缺名稱。
- `job_id`：職缺 ID。
- `company`：公司名稱。
- `industry`：產業。
- `location`：地區。
- `experience`：經驗要求。
- `education`：學歷要求。
- `salary`：原始薪資文字。
- `salary_min/max/avg/note`：解析後的薪資。
- `tags`：其他標籤（如遠端工作）。
- `update_date`：更新日期。
- `source_url`：來源頁面。

## 常見問題排除
- **錯誤：找不到元素**：網站結構改變，檢查 CSS 選擇器（By.CSS_SELECTOR）。
- **Cloudflare 擋住**：增加等待時間，或用 VPN 換 IP。
- **瀏覽器不開**：檢查 Chrome 版本和驅動程式是否匹配。
- **資料不完整**：頁面有廣告，影響索引；可調整等待時間。
- **記憶體不足**：爬太多頁時，關閉無頭模式觀察。

## 延伸學習
- 學 Selenium：閱讀官方文件 https://www.selenium.dev/documentation/。
- 學 Pandas：練習讀寫 CSV，分析薪資平均值。
- 專題應用：用此資料分析職缺需求、薪資水平、熱門技能（例如計算 "Python" 出現頻率）。

如果有問題，歡迎討論！